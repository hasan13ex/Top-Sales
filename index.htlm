<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>pazarce — Yerli İlanlar</title>
  <meta name="description" content="Kullanıcı dostu, mobil uyumlu ilan platformu şablonu. Netlify/GitHub Pages için tek dosyalık HTML, CSS ve JS." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f1222;--card:#151936;--muted:#9aa5bd;--text:#e9eef8;--line:#242c56;
      --brand:#7c3aed;--brand-2:#4f46e5;--brand-3:#22d3ee;--ok:#10b981;--warn:#f59e0b;--danger:#ef4444
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:linear-gradient(180deg,#0f1222,#0f1530);color:var(--text);font:16px/1.6 Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{max-width:1100px;margin:0 auto;padding:16px}
    header{position:sticky;top:0;z-index:40;background:rgba(15,18,34,.7);backdrop-filter:saturate(140%) blur(10px);border-bottom:1px solid var(--line)}
    .nav{display:grid;grid-template-columns:1fr auto auto;gap:12px;align-items:center;padding:10px 0}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .badge{width:36px;height:36px;border-radius:12px;background:linear-gradient(135deg,var(--brand),var(--brand-2));display:grid;place-items:center;color:#0b1020}
    .search{display:flex;gap:8px;align-items:center;border:1px solid var(--line);border-radius:14px;padding:8px 10px;background:rgba(21,25,54,.7)}
    .search input{flex:1;background:transparent;border:0;outline:none;color:var(--text)}
    .actions{display:flex;gap:8px}
    .btn{border:0;border-radius:12px;padding:10px 12px;font-weight:700;cursor:pointer}
    .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#0b1020}
    .btn.ghost{background:transparent;border:1px solid var(--line);color:var(--text)}
    .btn.icon{display:grid;place-items:center;padding:10px;min-width:44px}

    .chips{display:flex;gap:8px;overflow:auto;padding:10px 0}
    .chip{white-space:nowrap;border:1px solid var(--line);padding:8px 12px;border-radius:999px;background:#14183a;color:var(--muted);cursor:pointer}
    .chip.active{background:linear-gradient(135deg,rgba(124,58,237,.2),rgba(79,70,229,.2));color:#cfd7f6;border-color:#3a4591}

    .layout{display:grid;grid-template-columns:260px 1fr;gap:16px}
    aside{position:sticky;top:72px;align-self:start}
    .card{background:linear-gradient(180deg,rgba(21,25,54,.7),rgba(21,25,54,.4));border:1px solid var(--line);border-radius:18px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    .card h3{margin:0 0 8px;font-size:16px}
    label{display:block;font-size:14px;color:var(--muted);margin:8px 0 6px}
    input,select,textarea{width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--line);background:#101538;color:var(--text)}
    input:focus,select:focus,textarea:focus{outline:2px solid #3944a8}

    .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .item{overflow:hidden;border-radius:16px;border:1px solid var(--line);background:#0f1330}
    .thumb{aspect-ratio:4/3;background:#0b0f27;position:relative}
    .price{position:absolute;left:8px;bottom:8px;background:rgba(15,18,34,.7);backdrop-filter:blur(6px);border:1px solid var(--line);padding:6px 9px;border-radius:10px;font-weight:800}
    .fav{position:absolute;right:8px;top:8px}
    .meta{padding:10px}
    .ttl{margin:0 0 6px;font-weight:700}
    .sub{margin:0;color:var(--muted);font-size:13px}

    .tools{display:flex;gap:8px;align-items:center;margin:8px 0 12px}
    .switch{display:flex;gap:6px;align-items:center}
    .switch input{appearance:none;width:38px;height:22px;border-radius:999px;background:#2a2f58;position:relative;outline:none;cursor:pointer}
    .switch input:checked{background:linear-gradient(135deg,var(--brand),var(--brand-2))}
    .switch input::after{content:"";position:absolute;top:3px;left:3px;width:16px;height:16px;border-radius:50%;background:#e9eef8;transition:.2s}
    .switch input:checked::after{left:19px}

    .sheet{position:fixed;inset:0;background:rgba(4,6,15,.6);display:none;align-items:flex-end;z-index:50}
    .sheet.active{display:flex}
    .panel{width:100%;max-width:520px;margin:0 auto;background:#101538;border-top-left-radius:16px;border-top-right-radius:16px;border:1px solid var(--line);padding:16px}

    .detail{display:none;grid-template-columns:1fr 360px;gap:16px}
    .detail.active{display:grid}

    .gallery{display:grid;grid-template-columns:1fr 1fr;gap:8px}

    footer{border-top:1px solid var(--line);margin-top:22px;color:var(--muted);font-size:14px}

    @media (max-width:1024px){.layout{grid-template-columns:1fr}.grid{grid-template-columns:repeat(2,1fr)}aside{position:static}}
    @media (max-width:620px){.nav{grid-template-columns:1fr auto}.grid{grid-template-columns:1fr}.detail{grid-template-columns:1fr}.hide-sm{display:none}}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <a class="brand" href="#"><div class="badge">PZ</div> pazarce</a>
      <div class="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm10 2-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
        <input id="q" placeholder="Ara: telefon, bisiklet, daire..." />
        <button id="fOpen" class="btn ghost hide-sm">Filtreler</button>
      </div>
      <div class="actions">
        <button id="postBtn" class="btn primary">İlan Ver</button>
        <button class="btn icon ghost" title="Giriş/Kayıt">☰</button>
      </div>
    </div>
    <div class="container">
      <div class="chips" id="cats"></div>
    </div>
  </header>

  <main class="container">
    <div class="layout">
      <aside class="card">
        <h3>Hızlı Filtre</h3>
        <label>Şehir</label>
        <select id="city">
          <option value="">Tümü</option>
          <option>İstanbul</option>
          <option>Ankara</option>
          <option>İzmir</option>
          <option>Bursa</option>
        </select>
        <label>Durum</label>
        <select id="cond">
          <option value="">Tümü</option>
          <option>Sıfır</option>
          <option>İkinci El</option>
        </select>
        <label>Fiyat (₺)</label>
        <div style="display:flex;gap:8px">
          <input id="min" placeholder="min" inputmode="numeric" />
          <input id="max" placeholder="max" inputmode="numeric" />
        </div>
        <div class="tools">
          <button id="apply" class="btn primary" style="flex:1">Uygula</button>
          <button id="reset" class="btn ghost">Sıfırla</button>
        </div>
        <div class="switch"><input id="onlyImg" type="checkbox"/> <small>Yalnız görselli</small></div>
      </aside>

      <section>
        <div class="tools">
          <button id="fOpen2" class="btn ghost">Filtreler</button>
          <div style="margin-left:auto;display:flex;gap:10px;align-items:center">
            <small style="color:var(--muted)">Sırala:</small>
            <select id="sort">
              <option value="new">En yeni</option>
              <option value="cheap">En ucuz</option>
              <option value="exp">En pahalı</option>
            </select>
          </div>
        </div>
        <div id="feed" class="grid" aria-live="polite"></div>
        <div id="empty" style="display:none;color:var(--muted);padding:16px">Sonuç bulunamadı.</div>
      </section>
    </div>

    <!-- Detay sayfası (SPA içinde) -->
    <section id="detail" class="detail">
      <div>
        <div class="gallery card" id="gal"></div>
        <div class="card">
          <h2 id="dTitle" style="margin:0 0 6px"></h2>
          <div id="dMeta" class="sub"></div>
          <p id="dDesc" style="margin-top:10px"></p>
        </div>
      </div>
      <div>
        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <strong id="dPrice" style="font-size:22px"></strong>
            <button class="btn ghost" onclick="history.back()">Geri</button>
          </div>
          <div style="height:10px"></div>
          <button class="btn primary" style="width:100%">Satıcıyla İletişim</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Alt tabaka filtre paneli (mobil) -->
  <div class="sheet" id="sheet">
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>Filtreler</strong>
        <button id="fClose" class="btn icon ghost">✕</button>
      </div>
      <div style="height:8px"></div>
      <label>Kategori</label>
      <div id="mCats" class="chips"></div>
      <label>Şehir</label>
      <select id="mCity"></select>
      <label>Durum</label>
      <select id="mCond"><option value="">Tümü</option><option>Sıfır</option><option>İkinci El</option></select>
      <label>Fiyat Aralığı</label>
      <div style="display:flex;gap:8px">
        <input id="mMin" placeholder="min" inputmode="numeric"/>
        <input id="mMax" placeholder="max" inputmode="numeric"/>
      </div>
      <div style="height:12px"></div>
      <button id="mApply" class="btn primary" style="width:100%">Uygula</button>
    </div>
  </div>

  <!-- İlan verme formu -->
  <div class="sheet" id="post">
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>İlan Ver</strong>
        <button id="pClose" class="btn icon ghost">✕</button>
      </div>
      <div style="height:8px"></div>
      <form id="postForm" style="display:grid;gap:10px">
        <label>Başlık<input name="title" required placeholder="Ör: iPhone 12 128GB"/></label>
        <label>Açıklama<textarea name="desc" rows="4" placeholder="Ürün hakkında bilgi..."></textarea></label>
        <label>Fiyat (₺)<input name="price" required inputmode="numeric"/></label>
        <label>Şehir<select name="city"><option>İstanbul</option><option>Ankara</option><option>İzmir</option><option>Bursa</option></select></label>
        <label>Kategori<select name="cat"></select></label>
        <label>Durum<select name="cond"><option>Sıfır</option><option>İkinci El</option></select></label>
        <label>Görsel URL (isteğe bağlı)<input name="img" placeholder="https://.../resim.jpg"/></label>
        <button class="btn primary" type="submit">Yayınla</button>
      </form>
    </div>
  </div>

  <footer class="container">
    © <span id="yil"></span> pazarce — Topluluğa ait basit ilan şablonu.
  </footer>

  <script>
    // *** UYARI ***  
    // Mevcut şablon özgün bir tasarımdır; tanınmış platformların marka ve görsel kimliğini birebir kopyalamaz.  
    // Aşağıdaki veri ve akış, tek dosyalık bir demo/SWG (Single Web Page) örneğidir.

    const CATS = ["Telefon", "Bilgisayar", "Emlak", "Araba", "Ev Eşyası", "Spor", "Oyun", "Moda", "Diğer"]
    const CITIES = ["İstanbul","Ankara","İzmir","Bursa"]

    // Basit demo ilanları
    let items = [
      {id:1, title:"iPhone 11 64GB", price:13500, city:"İstanbul", cond:"İkinci El", cat:"Telefon", date:"Bugün", img:"https://picsum.photos/seed/ph1/600/400", desc:"Temiz, kutulu."},
      {id:2, title:"Oyun Bilgisayarı Ryzen", price:22000, city:"Ankara", cond:"İkinci El", cat:"Bilgisayar", date:"Dün", img:"https://picsum.photos/seed/ph2/600/400", desc:"RTX ekran kartlı."},
      {id:3, title:"1+1 Kiralık Daire", price:15000, city:"İzmir", cond:"İkinci El", cat:"Emlak", date:"3 gün önce", img:"https://picsum.photos/seed/ph3/600/400", desc:"Merkezde, eşyalı."},
      {id:4, title:"Volkswagen Golf", price:650000, city:"Bursa", cond:"İkinci El", cat:"Araba", date:"Bugün", img:"https://picsum.photos/seed/ph4/600/400", desc:"Tramersiz, bakımlı."},
      {id:5, title:"Akıllı Saat", price:1200, city:"İstanbul", cond:"Sıfır", cat:"Telefon", date:"Dün", img:"https://picsum.photos/seed/ph5/600/400", desc:"Garanti belgesi mevcut."}
    ]

    // Erişim kısayolları
    const feed = document.getElementById('feed')
    const empty = document.getElementById('empty')
    const cats = document.getElementById('cats')
    const q = document.getElementById('q')
    const sort = document.getElementById('sort')
    const onlyImg = document.getElementById('onlyImg')

    // Yan filtreler
    const city = document.getElementById('city')
    const cond = document.getElementById('cond')
    const min = document.getElementById('min')
    const max = document.getElementById('max')

    // Mobil alt panel
    const sheet = document.getElementById('sheet')
    const fOpen = document.getElementById('fOpen')
    const fOpen2 = document.getElementById('fOpen2')
    const fClose = document.getElementById('fClose')
    const mCats = document.getElementById('mCats')
    const mCity = document.getElementById('mCity')
    const mCond = document.getElementById('mCond')
    const mMin = document.getElementById('mMin')
    const mMax = document.getElementById('mMax')

    // İlan verme paneli
    const post = document.getElementById('post')
    const postBtn = document.getElementById('postBtn')
    const pClose = document.getElementById('pClose')
    const postForm = document.getElementById('postForm')

    // Detay
    const detail = document.getElementById('detail')
    const gal = document.getElementById('gal')
    const dTitle = document.getElementById('dTitle')
    const dMeta = document.getElementById('dMeta')
    const dDesc = document.getElementById('dDesc')
    const dPrice = document.getElementById('dPrice')

    document.getElementById('yil').textContent = new Date().getFullYear()

    // Kategori çipleri
    function renderChips(target, current){
      target.innerHTML = ''
      CATS.forEach(c=>{
        const b = document.createElement('button')
        b.className = 'chip' + (current===c?' active':'')
        b.textContent = c
        b.onclick = ()=>{state.cat = (state.cat===c?'':c); syncFiltersFromState(); draw()}
        target.appendChild(b)
      })
    }

    // Basit state yönetimi
    const state = { q:'', cat:'', city:'', cond:'', min:'', max:'', onlyImg:false, sort:'new' }

    function syncFiltersFromState(){
      // yan panel
      city.value = state.city
      cond.value = state.cond
      min.value = state.min
      max.value = state.max
      onlyImg.checked = state.onlyImg
      sort.value = state.sort
      // mobil
      mCity.value = state.city
      mCond.value = state.cond
      mMin.value = state.min
      mMax.value = state.max
      renderChips(cats, state.cat)
      renderChips(mCats, state.cat)
    }

    // Şehir seçenekleri (mobil panel için de doldur)
    function fillCities(){
      mCity.innerHTML = '<option value="">Tümü</option>' + CITIES.map(c=>`<option>${c}</option>`).join('')
    }

    function draw(){
      let list = [...items]
      // arama
      if(state.q) list = list.filter(x=> (x.title+" "+(x.desc||'')).toLowerCase().includes(state.q.toLowerCase()))
      if(state.cat) list = list.filter(x=> x.cat===state.cat)
      if(state.city) list = list.filter(x=> x.city===state.city)
      if(state.cond) list = list.filter(x=> x.cond===state.cond)
      if(state.min) list = list.filter(x=> x.price>= +state.min)
      if(state.max) list = list.filter(x=> x.price<= +state.max)
      if(state.onlyImg) list = list.filter(x=> !!x.img)
      if(state.sort==='cheap') list.sort((a,b)=>a.price-b.price)
      if(state.sort==='exp') list.sort((a,b)=>b.price-a.price)
      // 'new' için varsayılan bırakıyoruz

      feed.innerHTML = ''
      empty.style.display = list.length? 'none':'block'
      list.forEach(x=> feed.appendChild(card(x)))
    }

    function card(x){
      const a = document.createElement('article')
      a.className='item'
      a.innerHTML = `
        <div class="thumb">
          ${x.img?`<img src="${x.img}" alt="${x.title}">`:''}
          <div class="price">₺ ${fmt(x.price)}</div>
          <button class="btn icon ghost fav" title="Favori">♡</button>
        </div>
        <div class="meta">
          <h4 class="ttl">${x.title}</h4>
          <p class="sub">${x.city} • ${x.cond} • ${x.date}</p>
        </div>`
      a.onclick = ()=> openDetail(x)
      return a
    }

    function openDetail(x){
      // Ana listeyi gizle, detay görünümünü aç
      document.querySelector('.layout').style.display='none'
      detail.classList.add('active')
      gal.innerHTML = `<img src="${x.img}" alt="${x.title}" style="grid-column:1/3;border-radius:12px">`
      dTitle.textContent = x.title
      dMeta.textContent = `${x.city} • ${x.cond} • ${x.date} • Kategori: ${x.cat}`
      dDesc.textContent = x.desc || ''
      dPrice.textContent = '₺ ' + fmt(x.price)
      window.scrollTo({top:0,behavior:'smooth'})
      const onPop = ()=>{ // geri dönünce listeyi aç
        detail.classList.remove('active')
        document.querySelector('.layout').style.display='grid'
        window.removeEventListener('popstate', onPop)
      }
      history.pushState({id:x.id}, '', '#detay-'+x.id)
      window.addEventListener('popstate', onPop)
    }

    function fmt(n){
      return (n||0).toLocaleString('tr-TR')
    }

    // Etkileşimler
    q.addEventListener('input', ()=>{state.q = q.value; draw()})
    sort.addEventListener('change', ()=>{state.sort = sort.value; draw()})
    onlyImg.addEventListener('change', ()=>{state.onlyImg = onlyImg.checked; draw()})

    document.getElementById('apply').onclick = ()=>{
      state.city = city.value; state.cond = cond.value; state.min = min.value; state.max = max.value; draw()
    }
    document.getElementById('reset').onclick = ()=>{
      Object.assign(state,{q:'',cat:'',city:'',cond:'',min:'',max:'',onlyImg:false,sort:'new'})
      q.value=''; syncFiltersFromState(); draw()
    }

    // Mobil filtre paneli
    function openSheet(){sheet.classList.add('active')}
    function closeSheet(){sheet.classList.remove('active')}
    fOpen&& (fOpen.onclick = openSheet)
    fOpen2&&(fOpen2.onclick = openSheet)
    fClose&&(fClose.onclick = closeSheet)

    document.getElementById('mApply').onclick = ()=>{
      state.city = mCity.value; state.cond = mCond.value; state.min = mMin.value; state.max = mMax.value; closeSheet(); draw()
    }

    // İlan verme
    postBtn.onclick = ()=> post.classList.add('active')
    pClose.onclick = ()=> post.classList.remove('active')
    const catSel = postForm.elements['cat']
    CATS.forEach(c=>{ const o=document.createElement('option'); o.textContent=c; catSel.appendChild(o) })

    postForm.onsubmit = (e)=>{
      e.preventDefault()
      const f = new FormData(postForm)
      const x = {
        id: Date.now(),
        title: f.get('title'),
        desc: f.get('desc')||'',
        price: +f.get('price')||0,
        city: f.get('city'),
        cond: f.get('cond'),
        cat: f.get('cat'),
        date: 'Az önce',
        img: f.get('img')||''
      }
      items.unshift(x)
      post.reset(); post.classList.remove('active')
      draw()
      // Yeni ilan bildirimi
      const n = document.createElement('div');
      n.textContent = 'İlan yayınlandı';
      n.style.cssText = 'position:fixed;left:50%;top:20px;transform:translateX(-50%);background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#0b1020;padding:10px 14px;border-radius:12px;font-weight:800;z-index:60';
      document.body.appendChild(n); setTimeout(()=>n.remove(),1600)
    }

    // Başlat
    function init(){
      // kategori çipleri
      renderChips(cats, state.cat)
      renderChips(mCats, state.cat)
      // şehir listeleri
      CITIES.forEach(c=>{ const o=document.createElement('option'); o.textContent=c; city.appendChild(o) })
      fillCities()
      syncFiltersFromState()
      draw()
    }
    init()
  </script>
</body>
</html>
